{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Bootstrap , Font Awesome & Custom CSS links -->
    <link 
        href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" 
        rel="stylesheet">
    <!-- Booststrap Icons link -->
    <link 
        href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" 
        rel="stylesheet">
    <link 
        rel="stylesheet" 
        href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
        integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" 
        crossorigin="anonymous">
    <link   
        rel="stylesheet" 
        href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link 
        href="https://fonts.googleapis.com/css?family=Sofia" 
        rel="stylesheet">
    <link 
        rel="stylesheet" 
        href="{% static 'css/header-footer.css' %}">
    <link 
        rel="stylesheet" 
        href="{% static 'css/custom-stylesheet-registration.css' %}">

    <title> ðŸ›¡ DNI - Donor Alliance Center </title>
</head>
<body>
    <header class="zone red">
        <div class="nav-bar">
            <p id="company_name" class="push_this_left"><a href="hospital-main-page.html"> Donor's Registration</a></p>
        </div>
    </header>
    <!-- Show messages -->
    {% if messages %}
      <div class="container mt-3">
        {% for message in messages %}
          <div class="alert alert-{{ message.tags }} alert-dismissible fade show auto-dismiss-alert shadow-sm rounded-3" role="alert">
            <div class="d-flex align-items-center">
              {% if message.tags == 'success' %}
                <i class="bi bi-check-circle-fill text-success me-2 fs-5"></i>
              {% elif message.tags == 'error' %}
                <i class="bi bi-x-circle-fill text-danger me-2 fs-5"></i>
              {% elif message.tags == 'warning' %}
                <i class="bi bi-exclamation-triangle-fill text-warning me-2 fs-5"></i>
              {% elif message.tags == 'info' %}
                <i class="bi bi-info-circle-fill text-primary me-2 fs-5"></i>
              {% endif %}
              <span>{{ message }}</span>
            </div>
          </div>
        {% endfor %}
      
    {% endif %}

    <!-- Registration Form -->
    <div class="overlay">
      <form method="POST" action="{% url 'donor-register' %}">
        {% csrf_token %}
        <div class="container">
          <div class="row justify-content-center">
            <div class="col-md-6">
              <div class="card bg-light mb-3">
                <header class="card-header bg-light mb-3">
                    <h4 align="Center" class="card-title mt-2"> <b>Donor Dashboard</b><br>
                        <i>Register for a new account</i></h4>
                </header>

                <div class="card-content">
                  <div class="form-group">
                    <span class="input-group-addon"><i class="fa fa-user"></i></span>
                    <label>Donor name</label>
                    <input 
                      type="text" 
                      name="donor_name" 
                      class="form-control"
                      placeholder="   ----- donor name -----   "required>
                  </div>

                  <div class="form-group">
                    <span class="input-group-addon"><i class="fa fa-at"></i></span>
                    <label>Email address</label>
                    <input 
                      type="email" 
                      name="email" 
                      class="form-control" 
                      placeholder="   ----- email address -----   "required>
                  </div>

                  <div class="form-group">
                    <span class="input-group-addon"><i class="fa fa-user"></i></span>
                    <label>Enter Username</label>
                    <input 
                      type="text" 
                      name="username" 
                      class="form-control"
                      placeholder="   ----- user-name -----   "required>
                  </div>

                  <div class="form-row">
                    <div class="form-group col-md-6">
                      <span class="input-group-addon"><i class="fa fa-building"></i></span>
                      <label>City</label>
                      <input 
                        type="text" 
                        name="city" 
                        class="form-control"
                        placeholder="   ----- city name -----   "required>
                    </div>

                    <div class="form-group col-md-6">
                      <span class="input-group-addon"><i class="fa fa-building"></i></span>
                      <label>Province</label>
                      <input 
                        type="text"
                        name="province"
                        id="input-province" 
                        class="form-control"
                        placeholder="   ---residence province---">
                    </div>
                  </div>

                  <div class="form-row">
                    <div class="form-group col-md-6">
                      <span class="input-group-addon"><i class="fa fa-mobile"></i></span>
                      <label>Contact no. (+254)</label>
                      <input 
                        type="text" 
                        name="contact_number" 
                        class="form-control" 
                        maxlength="10" 
                        minlength="10" 
                        pattern="\d*"
                        placeholder="   ---contact number---" required>
                    </div>

                    <div class="form-group col-md-6">
                      <span class="input-group-addon"><i class="fa fa-building"></i></span>
                      <label>Country</label>
                      <select id="input-country" name="country" class="form-control">
                        <option selected align="Center">---------------</option>
                        <option value="Kenya">Kenya</option>
                        <option value="Uganda">Uganda</option>
                        <option value="Tanzania">Tanzania</option>
                        <option value="Somalia">Somalia</option>
                        <option value="Ethiopia">Ethiopia</option>
                        <option value="Sudan">Sudan</option>
                        <option value="Madagascar">Madagascar</option>
                        <option align="Center">---------------</option>
                      </select>
                    </div>
                  </div>

                  <div class="form-group">
                    <span class="input-group-addon"><i class="fa fa-lock"></i></span>
                    <label>Create password</label>
                    <input 
                      type="password"
                      id="password1" 
                      class="form-control" 
                      name="password"   
                      minlength="6"
                      pattern="(?=.*[a-z])(?=.*\d).{6,}"
                      title="Please include 1 lowercase letter and 1 digit in your password"
                      placeholder="   ----- password -----   "required>
                  </div>

                  <div class="form-group">
                    <span class="input-group-addon"><i class="fa fa-lock"></i></span>
                    <label>Confirm password</label>
                    <input 
                      class="form-control" 
                      type="password" 
                      id="password2" 
                      oninput="checkpassword();" 
                      placeholder="   ----- re-enter password -----   "required>
                  </div>

                  <div class="form-group">
                    <span id="password-validation-msg"></span>
                  </div>

                  <div class="form-group">
                    <button type="submit" id="submit" class="btn btn-color btn-block">Register</button>
                  </div>

                  <div class="form-group align-center">
                    <i>Already have an account?</i> <a href="{% url 'donor-login' %}">click here</a>
                  </div>
                </div> <!-- card-content -->
              </div> <!-- card -->
            </div> <!-- col -->
          </div> <!-- row -->
        </div> <!-- container -->
      </form> <!-- form -->
    </div> <!-- overlay -->

    <!-- Footer section -->
    <footer class="zone blue footer_style">
      &copy; 2025. Dev Aladinh production. We donate Inc. All rights reserved. |
      <a href="#">About us</a> |
      <a href="#">Contact us</a>
    </footer>

    <!-- Custom JS script file URL -->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
            integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
            crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
            integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
            crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
            integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
            crossorigin="anonymous"></script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        setTimeout(() => {
          const alerts = document.querySelectorAll(".auto-dismiss-alert");
          alerts.forEach(alert => {
            alert.classList.remove("show"); // triggers fade-out
            setTimeout(() => {
              let bsAlert = bootstrap.Alert.getOrCreateInstance(alert);
              bsAlert.close();
            }, 300); // allow fade transition to complete (~0.3s)
          });
        }, 4000); // wait 4s before starting fade
      });
    </script>
  </body>
</html>
